import cron from 'node-cron';
import { CRON_SCHEDULE, DEV_CRON_SCHEDULE } from './constants';

const { NODE_ENV } = process.env;

const interval = () => {
  console.info(`${NODE_ENV} server started ¯\\_(₿)_/¯`);

  if (NODE_ENV === 'dev') {
    return DEV_CRON_SCHEDULE;
  }
  console.log(`
                ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿
             ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿
           ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿
         ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿
       ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿   ₿₿   ₿₿₿₿₿₿₿₿₿₿₿₿
      ₿₿₿₿₿₿₿₿₿₿₿₿       ₿₿   ₿₿₿₿₿₿₿₿₿₿₿₿₿₿    
     ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿          ₿₿₿₿₿₿₿₿₿₿₿₿₿₿
    ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿    ₿₿₿     ₿₿₿₿₿₿₿₿₿₿₿₿₿
    ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿    ₿₿₿₿₿     ₿₿₿₿₿₿₿₿₿₿₿₿
    ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿              ₿₿₿₿₿₿₿₿₿₿₿₿₿
    ₿₿₿₿₿₿₿₿₿₿₿₿₿₿     ₿₿₿     ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿
    ₿₿₿₿₿₿₿₿₿₿₿₿₿₿    ₿₿₿₿₿₿     ₿₿₿₿₿₿₿₿₿₿₿₿₿
     ₿₿₿₿₿₿₿₿₿₿      ₿₿₿₿₿₿₿     ₿₿₿₿₿₿₿₿₿₿₿₿
      ₿₿₿₿₿₿₿₿₿₿₿₿₿            ₿₿₿₿₿₿₿₿₿₿₿₿₿
       ₿₿₿₿₿₿₿₿₿₿₿₿   ₿₿   ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿
         ₿₿₿₿₿₿₿₿₿   ₿₿   ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿
           ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿
             ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿
                ₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿₿
    `);

  return CRON_SCHEDULE;
};

export default task => cron.schedule(interval(), task).start();
